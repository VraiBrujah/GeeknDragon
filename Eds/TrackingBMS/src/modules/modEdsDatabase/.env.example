# === EDS Database Module - Configuration ===

# === Database Configuration ===
DATABASE_URL=postgresql://eds_admin:eds_secure_2025@localhost:6432/trackingbms
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Postgres Direct (sans pgBouncer)
# DATABASE_URL=postgresql://eds_admin:eds_secure_2025@localhost:5432/trackingbms

# === Supabase Configuration (Option 1 - Recommandée) ===
SUPABASE_URL=http://localhost:8000
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# === Security Configuration ===
JWT_SECRET_KEY=your-super-secret-jwt-token-with-at-least-32-characters-long-for-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# API Keys
API_KEY_HEADER=X-API-Key
ADMIN_API_KEY=eds-admin-key-2025-secure

# === Redis Configuration ===
REDIS_URL=redis://:eds_redis_2025@localhost:6379
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# Session Storage
SESSION_EXPIRE_MINUTES=60
SESSION_REDIS_DB=1

# === API Configuration ===
API_HOST=0.0.0.0
API_PORT=8001
API_WORKERS=1
API_ENV=development
API_DEBUG=true
API_RELOAD=true

# CORS
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080", "http://localhost:5173"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
CORS_ALLOW_HEADERS=["*"]

# Rate Limiting
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600
RATE_LIMIT_ENABLED=true

# === Logging Configuration ===
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/eds-database.log
LOG_MAX_SIZE=10MB
LOG_BACKUP_COUNT=5

# Structured Logging
LOG_REQUEST_ID=true
LOG_USER_ID=true
LOG_TENANT_ID=true

# === Multi-Tenant Configuration ===
DEFAULT_TENANT_ID=eds_default
TENANT_ISOLATION_ENABLED=true
TENANT_HEADER=X-Tenant-ID

# === Monitoring & Health ===
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
METRICS_ENABLED=true
METRICS_PORT=9090

# Prometheus
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=8002
PROMETHEUS_PATH=/metrics

# === Email Configuration (Development) ===
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=false
SMTP_FROM_EMAIL=noreply@edsquebec.com
SMTP_FROM_NAME=EDS TrackingBMS

# === Development Configuration ===
DEV_MODE=true
DEV_RELOAD=true
DEV_DEBUG_SQL=false
DEV_SEED_DATA=true

# Testing
TEST_DATABASE_URL=postgresql://eds_admin:eds_secure_2025@localhost:5432/trackingbms_test
TEST_REDIS_URL=redis://:eds_redis_2025@localhost:6379/15

# === Production Configuration (Commenté pour dev) ===
# PRODUCTION=true
# SSL_REQUIRED=true
# SECURE_COOKIES=true
# SENTRY_DSN=https://your-sentry-dsn
# NEW_RELIC_LICENSE_KEY=your-newrelic-key

# === Backup Configuration ===
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2AM
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/

# S3 Backup (Optional)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_BUCKET=eds-trackingbms-backups
# AWS_REGION=us-east-1

# === Feature Flags ===
FEATURE_REALTIME_ENABLED=true
FEATURE_AUDIT_LOGS_ENABLED=true
FEATURE_METRICS_COLLECTION=true
FEATURE_AUTO_BACKUP=true
FEATURE_EMAIL_NOTIFICATIONS=false

# === Module Specific ===
MODULE_NAME=modEdsDatabase
MODULE_VERSION=1.0.0
MODULE_DESCRIPTION=EDS TrackingBMS Database Module with Supabase Integration

# Service Discovery
SERVICE_REGISTRY_ENABLED=true
SERVICE_HEARTBEAT_INTERVAL=30
SERVICE_DISCOVERY_TTL=60