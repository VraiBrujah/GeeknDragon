{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Configuration Li-CUBE PRO‚Ñ¢ - EDS Qu√©bec",
  "description": "Sch√©ma complet pour la configuration des prix, sp√©cifications et calculs",
  "type": "object",
  "version": "2025-v2.0",
  "properties": {
    "_metadata": {
      "type": "object",
      "title": "üìã M√©tadonn√©es",
      "description": "Informations de version et historique",
      "properties": {
        "version": {
          "type": "string",
          "title": "Version",
          "description": "Version actuelle de la configuration",
          "default": "2025-v2.0-SIMPLE",
          "example": "2025-v2.0-SIMPLE",
          "usedBy": ["admin/interface.html"]
        },
        "lastUpdate": {
          "type": "string",
          "title": "Derni√®re mise √† jour",
          "description": "Date de la derni√®re modification",
          "format": "date",
          "example": "2025-01-23"
        },
        "description": {
          "type": "string",
          "title": "Description",
          "description": "Description de cette configuration",
          "example": "Configuration int√©gr√©e - TOUS les calculs dynamiques"
        },
        "created_by": {
          "type": "string",
          "title": "Cr√©√© par",
          "description": "Auteur de cette version",
          "default": "Claude Code",
          "example": "Claude Code"
        },
        "currency": {
          "type": "string",
          "title": "Devise",
          "description": "Devise utilis√©e pour tous les prix",
          "enum": ["CAD", "USD", "EUR"],
          "default": "CAD"
        },
        "tax_jurisdiction": {
          "type": "string",
          "title": "Juridiction fiscale",
          "description": "Province/r√©gion pour les taxes",
          "enum": ["Quebec", "Ontario", "BC", "Alberta"],
          "default": "Quebec"
        }
      }
    },

    "modes": {
      "type": "object",
      "title": "üí∞ Modes de Tarification",
      "description": "Configuration des prix pour vente et location",
      "properties": {
        "vente": {
          "type": "object",
          "title": "üè™ Mode Vente",
          "description": "Prix et param√®tres pour la vente directe",
          "properties": {
            "licube": {
              "type": "object",
              "title": "üîã Li-CUBE PRO‚Ñ¢",
              "properties": {
                "price_base": {
                  "type": "number",
                  "title": "Prix de base",
                  "description": "Prix de base unitaire HT",
                  "minimum": 0,
                  "unit": "CAD",
                  "example": 5000,
                  "usedBy": [
                    "edsquebec.html",
                    "licubepro.html",
                    "presentations-vente/presentations-vendeurs/presentation-complete.html",
                    "presentations-vente/images-onepage/comparaison-visuelle.html",
                    "test-pricing.html"
                  ],
                  "formula": "Base de calcul pour tous les prix de vente"
                },
                "taxes_percent": {
                  "type": "number",
                  "title": "Taux de taxe",
                  "description": "Pourcentage de taxes (TVQ + TPS au Qu√©bec)",
                  "minimum": 0,
                  "maximum": 25,
                  "unit": "%",
                  "example": 14.975,
                  "enum": [5, 13, 14.975, 15],
                  "usedBy": ["Tous les calculs de prix TTC"],
                  "formula": "price_total = price_base * (1 + taxes_percent/100)"
                },
                "installation_cost": {
                  "type": "number",
                  "title": "Co√ªt d'installation",
                  "description": "Frais d'installation et mise en service",
                  "minimum": 0,
                  "unit": "CAD",
                  "example": 500,
                  "usedBy": ["Calculs TCO vente"],
                  "formula": "Ajout√© au prix final"
                },
                "monitoring_monthly": {
                  "type": "number",
                  "title": "Co√ªt monitoring mensuel",
                  "description": "Frais optionnels de surveillance IoT",
                  "minimum": 0,
                  "unit": "CAD/mois",
                  "example": 20,
                  "usedBy": [
                    "licubepro.html",
                    "edsquebec.html"
                  ],
                  "formula": "monitoring_20_years = monitoring_monthly * 12 * 20"
                },
                "monitoring_optional": {
                  "type": "boolean",
                  "title": "Monitoring optionnel",
                  "description": "Si le monitoring est optionnel",
                  "default": true,
                  "example": true
                },
                "cycles": {
                  "type": "integer",
                  "title": "Cycles de vie",
                  "description": "Nombre de cycles garantis",
                  "minimum": 1000,
                  "example": 8000,
                  "usedBy": [
                    "edsquebec.html",
                    "licubepro.html",
                    "presentations-vente/images-onepage/comparaison-visuelle.html",
                    "presentations-location/images-onepage/specifications-techniques.html"
                  ]
                },
                "maintenance_annual": {
                  "type": "number",
                  "title": "Maintenance annuelle",
                  "description": "Co√ªt de maintenance par an",
                  "minimum": 0,
                  "unit": "CAD/an",
                  "example": 0,
                  "usedBy": ["Calculs TCO"],
                  "formula": "maintenance_20_years = maintenance_annual * 20"
                },
                "warranty_years": {
                  "type": "integer",
                  "title": "Garantie (ann√©es)",
                  "description": "Dur√©e de garantie constructeur",
                  "minimum": 1,
                  "maximum": 10,
                  "unit": "ann√©es",
                  "example": 5
                },
                "lifespan_years": {
                  "type": "integer",
                  "title": "Dur√©e de vie",
                  "description": "Dur√©e de vie estim√©e",
                  "minimum": 5,
                  "maximum": 50,
                  "unit": "ann√©es",
                  "example": 20
                }
              }
            },
            "nicd": {
              "type": "object",
              "title": "üîã Ni-Cd (Comparaison)",
              "properties": {
                "price_base": {
                  "type": "number",
                  "title": "Prix de base Ni-Cd",
                  "description": "Prix de r√©f√©rence pour comparaison",
                  "minimum": 0,
                  "unit": "CAD",
                  "example": 12000,
                  "usedBy": [
                    "presentations-vente/presentations-vendeurs/presentation-complete.html",
                    "presentations-vente/images-onepage/comparaison-visuelle.html"
                  ]
                },
                "cycles": {
                  "type": "integer",
                  "title": "Cycles Ni-Cd",
                  "description": "Cycles de vie Ni-Cd pour comparaison",
                  "example": 1500,
                  "usedBy": [
                    "licubepro.html",
                    "presentations-vente/images-onepage/comparaison-visuelle.html"
                  ]
                },
                "maintenance_annual": {
                  "type": "number",
                  "title": "Maintenance Ni-Cd",
                  "description": "Co√ªt de maintenance annuel Ni-Cd",
                  "minimum": 0,
                  "unit": "CAD/an",
                  "example": 452,
                  "usedBy": [
                    "presentations-vente/presentations-vendeurs/presentation-complete.html",
                    "Calculs TCO comparatifs"
                  ]
                },
                "replacement_cycle_years": {
                  "type": "integer",
                  "title": "Cycle de remplacement",
                  "description": "Fr√©quence de remplacement en ann√©es",
                  "minimum": 1,
                  "unit": "ann√©es",
                  "example": 6
                }
              }
            }
          }
        },

        "location": {
          "type": "object",
          "title": "üè¢ Mode Location",
          "description": "Tarifs et param√®tres pour la location",
          "properties": {
            "licube": {
              "type": "object",
              "title": "üîã Li-CUBE PRO‚Ñ¢ Location",
              "properties": {
                "monthly_rate": {
                  "type": "number",
                  "title": "Tarif mensuel",
                  "description": "Tarif de location mensuel standard",
                  "minimum": 50,
                  "maximum": 500,
                  "unit": "CAD/mois",
                  "example": 150,
                  "usedBy": [
                    "edsquebec.html",
                    "licubepro.html",
                    "test-pricing.html",
                    "presentations-location/images-onepage/comparaison-visuelle.html"
                  ]
                },
                "monthly_rate_min": {
                  "type": "number",
                  "title": "Tarif minimum",
                  "description": "Tarif mensuel minimum possible",
                  "minimum": 0,
                  "unit": "CAD/mois",
                  "example": 100
                },
                "monthly_rate_max": {
                  "type": "number",
                  "title": "Tarif maximum",
                  "description": "Tarif mensuel maximum",
                  "minimum": 100,
                  "unit": "CAD/mois",
                  "example": 150
                },
                "monitoring_included": {
                  "type": "boolean",
                  "title": "Monitoring inclus",
                  "description": "Si le monitoring est inclus dans le tarif",
                  "default": true,
                  "example": true
                },
                "installation_included": {
                  "type": "boolean",
                  "title": "Installation incluse",
                  "description": "Si l'installation est incluse",
                  "default": true,
                  "example": true
                },
                "maintenance_included": {
                  "type": "boolean",
                  "title": "Maintenance incluse",
                  "description": "Si la maintenance est incluse",
                  "default": true,
                  "example": true
                },
                "contract_minimum_months": {
                  "type": "integer",
                  "title": "Dur√©e minimum contrat",
                  "description": "Dur√©e minimum de contrat",
                  "minimum": 1,
                  "unit": "mois",
                  "example": 12
                }
              }
            },
            "nicd": {
              "type": "object",
              "title": "üîã Ni-Cd Location (Comparaison)",
              "properties": {
                "monthly_rate": {
                  "type": "number",
                  "title": "Tarif mensuel Ni-Cd",
                  "description": "Tarif de r√©f√©rence Ni-Cd",
                  "unit": "CAD/mois",
                  "example": 300,
                  "usedBy": ["Calculs TCO comparatifs location"]
                }
              }
            }
          }
        }
      }
    },

    "battery_specs": {
      "type": "object",
      "title": "üîß Sp√©cifications Techniques",
      "description": "Caract√©ristiques techniques des batteries",
      "properties": {
        "licube": {
          "type": "object",
          "title": "üîã Sp√©cifications Li-CUBE PRO‚Ñ¢",
          "properties": {
            "weight_kg": {
              "type": "number",
              "title": "Poids",
              "description": "Poids de la batterie",
              "minimum": 1,
              "maximum": 200,
              "unit": "kg",
              "example": 23,
              "usedBy": [
                "presentations-location/images-onepage/comparaison-visuelle.html"
              ]
            },
            "efficiency_percentage": {
              "type": "number",
              "title": "Efficacit√©",
              "description": "Efficacit√© √©nerg√©tique",
              "minimum": 50,
              "maximum": 100,
              "unit": "%",
              "example": 96
            },
            "weight_reduction_percentage": {
              "type": "number",
              "title": "R√©duction de poids vs Ni-Cd",
              "description": "Pourcentage de r√©duction de poids par rapport au Ni-Cd",
              "minimum": 0,
              "maximum": 100,
              "unit": "%",
              "example": 71,
              "usedBy": [
                "edsquebec.html",
                "presentations-location/images-onepage/specifications-techniques.html",
                "presentations-location/images-onepage/comparaison-visuelle.html"
              ],
              "formula": "((nicd.weight_kg - licube.weight_kg) / nicd.weight_kg) * 100"
            },
            "energy_density": {
              "type": "number",
              "title": "Densit√© √©nerg√©tique",
              "description": "Densit√© √©nerg√©tique",
              "minimum": 50,
              "maximum": 300,
              "unit": "Wh/kg",
              "example": 117,
              "usedBy": [
                "presentations-location/images-onepage/comparaison-visuelle.html"
              ]
            }
          }
        },
        "nicd": {
          "type": "object",
          "title": "üîã Sp√©cifications Ni-Cd",
          "properties": {
            "weight_kg": {
              "type": "number",
              "title": "Poids Ni-Cd",
              "description": "Poids de r√©f√©rence Ni-Cd",
              "unit": "kg",
              "example": 80,
              "usedBy": [
                "presentations-location/images-onepage/comparaison-visuelle.html"
              ]
            },
            "energy_density": {
              "type": "number",
              "title": "Densit√© √©nerg√©tique Ni-Cd",
              "description": "Densit√© √©nerg√©tique Ni-Cd",
              "unit": "Wh/kg",
              "example": 30,
              "usedBy": [
                "presentations-location/images-onepage/comparaison-visuelle.html"
              ]
            },
            "maintenance_visits_per_year": {
              "type": "integer",
              "title": "Visites de maintenance/an",
              "description": "Nombre de visites de maintenance requises par ann√©e",
              "minimum": 0,
              "unit": "visites/an",
              "example": 2,
              "usedBy": [
                "presentations-location/images-onepage/comparaison-visuelle.html"
              ]
            }
          }
        }
      }
    },

    "calculations": {
      "type": "object",
      "title": "üßÆ Calculs Dynamiques",
      "description": "Toutes les formules et calculs d√©riv√©s",
      "readonly": true,
      "properties": {
        "tco_vente": {
          "type": "object",
          "title": "üìä TCO Mode Vente",
          "properties": {
            "licube": {
              "type": "object",
              "title": "TCO Li-CUBE PRO‚Ñ¢ (Vente)",
              "properties": {
                "total_20_years": {
                  "type": "number",
                  "title": "TCO total 20 ans",
                  "description": "Co√ªt total de possession sur 20 ans",
                  "unit": "CAD",
                  "example": 5750,
                  "formula": "price_base * (1 + taxes_percent/100) + installation_cost + (monitoring_monthly * 12 * 20) + (maintenance_annual * 20)",
                  "dependencies": ["modes.vente.licube.price_base", "modes.vente.licube.taxes_percent", "modes.vente.licube.installation_cost", "modes.vente.licube.monitoring_monthly", "modes.vente.licube.maintenance_annual"],
                  "usedBy": [
                    "presentations-vente/images-onepage/infographie-tco.html",
                    "presentations-vente/images-onepage/comparaison-visuelle.html",
                    "presentations-vente/versions-pdf/presentation-executive.html",
                    "presentations-vente/presentations-vendeurs/presentation-complete.html",
                    "test-pricing.html"
                  ]
                }
              }
            },
            "nicd": {
              "type": "object",
              "title": "TCO Ni-Cd (Vente)",
              "properties": {
                "total_20_years": {
                  "type": "number",
                  "title": "TCO Ni-Cd 20 ans",
                  "description": "Co√ªt total Ni-Cd sur 20 ans pour comparaison",
                  "unit": "CAD",
                  "example": 22500,
                  "formula": "price_base * (1 + taxes_percent/100) + installation_cost + (maintenance_annual * 20) + (replacement_cost * replacement_cycles)",
                  "usedBy": [
                    "presentations-vente/images-onepage/infographie-tco.html",
                    "presentations-vente/images-onepage/comparaison-visuelle.html",
                    "presentations-vente/presentations-vendeurs/presentation-complete.html"
                  ]
                }
              }
            },
            "savings": {
              "type": "object",
              "title": "üí∞ √âconomies (Vente)",
              "properties": {
                "total": {
                  "type": "number",
                  "title": "√âconomies totales",
                  "description": "√âconomies absolues vs Ni-Cd",
                  "unit": "CAD",
                  "example": 16750,
                  "formula": "tco_vente.nicd.total_20_years - tco_vente.licube.total_20_years",
                  "usedBy": [
                    "licubepro.html",
                    "presentations-vente/images-onepage/infographie-tco.html",
                    "presentations-vente/presentations-vendeurs/presentation-complete.html"
                  ]
                },
                "percentage": {
                  "type": "number",
                  "title": "Pourcentage d'√©conomies",
                  "description": "Pourcentage d'√©conomies vs Ni-Cd",
                  "unit": "%",
                  "example": 74,
                  "formula": "((tco_vente.nicd.total_20_years - tco_vente.licube.total_20_years) / tco_vente.nicd.total_20_years) * 100",
                  "usedBy": [
                    "edsquebec.html",
                    "licubepro.html",
                    "presentations-vente/versions-pdf/presentation-executive.html",
                    "presentations-location/images-onepage/specifications-techniques.html"
                  ]
                },
                "roi_years": {
                  "type": "number",
                  "title": "Retour sur investissement",
                  "description": "P√©riode de retour sur investissement en ann√©es",
                  "unit": "ann√©es",
                  "example": 2,
                  "formula": "modes.vente.licube.price_total / (annual_savings_vs_nicd)",
                  "usedBy": [
                    "licubepro.html"
                  ]
                }
              }
            }
          }
        },

        "tco_location": {
          "type": "object",
          "title": "üìä TCO Mode Location",
          "properties": {
            "savings": {
              "type": "object",
              "title": "üí∞ √âconomies (Location)",
              "properties": {
                "total": {
                  "type": "number",
                  "title": "√âconomies location",
                  "description": "√âconomies totales en mode location",
                  "unit": "CAD",
                  "example": 36000,
                  "usedBy": [
                    "licubepro.html"
                  ]
                },
                "percentage": {
                  "type": "number",
                  "title": "Pourcentage √©conomies location",
                  "description": "Pourcentage d'√©conomies location",
                  "unit": "%",
                  "example": 50,
                  "usedBy": [
                    "presentations-location/images-onepage/specifications-techniques.html"
                  ]
                },
                "roi_months": {
                  "type": "number",
                  "title": "ROI location en mois",
                  "description": "Retour sur investissement en mois",
                  "unit": "mois",
                  "example": 6,
                  "usedBy": [
                    "licubepro.html"
                  ]
                }
              }
            }
          }
        }
      }
    }
  },

  "required": ["_metadata", "modes", "battery_specs"],
  "additionalProperties": false
}