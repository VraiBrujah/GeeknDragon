<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ Test Espacements LocationVS</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);
            color: #F8FAFC;
            padding: 2rem;
        }
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(16, 185, 129, 0.05);
            padding: 2rem;
            border-radius: 16px;
        }
        .test-title {
            color: #10B981;
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 12px;
        }
        .spacing-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
        }
        .spacing-control label {
            color: #10B981;
            font-weight: 600;
            min-width: 200px;
        }
        .spacing-control input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #10B981;
            color: #F8FAFC;
            padding: 0.5rem;
            border-radius: 4px;
            width: 80px;
        }
        .spacing-control button {
            background: #10B981;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
        }
        .spacing-control button:hover {
            background: #14B8A6;
        }
        .current-value {
            color: #14B8A6;
            font-weight: bold;
        }
        .test-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }
        .btn-test {
            background: linear-gradient(135deg, #10B981 0%, #14B8A6 100%);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        .btn-test:hover {
            transform: translateY(-2px);
        }
        .diagnostic-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">üß™ Test Espacements Dynamiques</h1>
        
        <div class="test-section">
            <h3>Contr√¥les d'Espacement</h3>
            <p style="color: #CBD5E1; margin-bottom: 1rem;">
                Modifiez les valeurs et cliquez "Appliquer" pour tester les espacements en temps r√©el.
            </p>
            
            <div class="spacing-control">
                <label>Header Spacer (px):</label>
                <input type="number" id="headerSpacing" value="80" min="0" max="500">
                <button onclick="updateSpacing('headerSpacerHeight', document.getElementById('headerSpacing').value)">Appliquer</button>
                <span>Actuel: <span id="current-header" class="current-value">80px</span></span>
            </div>
            
            <div class="spacing-control">
                <label>Hero ‚Üí Pricing (px):</label>
                <input type="number" id="heroPricingSpacing" value="0" min="0" max="500">
                <button onclick="updateSpacing('heroPricingSpacerHeight', document.getElementById('heroPricingSpacing').value)">Appliquer</button>
                <span>Actuel: <span id="current-hero-pricing" class="current-value">0px</span></span>
            </div>
            
            <div class="spacing-control">
                <label>Pricing ‚Üí Advantages (px):</label>
                <input type="number" id="pricingAdvantagesSpacing" value="0" min="0" max="500">
                <button onclick="updateSpacing('pricingAdvantagesSpacerHeight', document.getElementById('pricingAdvantagesSpacing').value)">Appliquer</button>
                <span>Actuel: <span id="current-pricing-advantages" class="current-value">0px</span></span>
            </div>
            
            <div class="spacing-control">
                <label>Advantages ‚Üí Comparison (px):</label>
                <input type="number" id="advantagesComparisonSpacing" value="0" min="0" max="500">
                <button onclick="updateSpacing('advantagesComparisonSpacerHeight', document.getElementById('advantagesComparisonSpacing').value)">Appliquer</button>
                <span>Actuel: <span id="current-advantages-comparison" class="current-value">0px</span></span>
            </div>
            
            <div class="spacing-control">
                <label>Comparison ‚Üí Contact (px):</label>
                <input type="number" id="comparisonContactSpacing" value="0" min="0" max="500">
                <button onclick="updateSpacing('comparisonContactSpacerHeight', document.getElementById('comparisonContactSpacing').value)">Appliquer</button>
                <span>Actuel: <span id="current-comparison-contact" class="current-value">0px</span></span>
            </div>
        </div>
        
        <div class="test-actions">
            <button class="btn-test" onclick="loadSpacingsFromStorage()">üîÑ Charger depuis Storage</button>
            <button class="btn-test" onclick="resetAllSpacings()">üîÑ Reset D√©faut</button>
            <button class="btn-test" onclick="showDiagnostic()">üîç Diagnostic</button>
            <button class="btn-test" onclick="openLocationPage()">üì± Ouvrir Location.html</button>
        </div>
        
        <div class="test-section">
            <h3>Diagnostic SpacingManager</h3>
            <div id="diagnostic-output" class="diagnostic-info">Cliquez sur "Diagnostic" pour voir l'√©tat du syst√®me...</div>
        </div>
    </div>

    <script>
        // Test functions
        function updateSpacing(spacingName, value) {
            // Simulation localStorage pour test
            const styles = JSON.parse(localStorage.getItem('locationVS-live-styles') || '{}');
            styles[spacingName] = parseInt(value) || 0;
            localStorage.setItem('locationVS-live-styles', JSON.stringify(styles));
            
            // Mise √† jour visuelle
            updateCurrentValue(spacingName, value);
            
            // √âv√©nement pour SpacingManager
            window.dispatchEvent(new CustomEvent('locationVS-spacing-update', {
                detail: { spacings: { [spacingName]: parseInt(value) || 0 } }
            }));
            
            console.log(`üìè Test: ${spacingName} = ${value}px`);
        }
        
        function updateCurrentValue(spacingName, value) {
            const mappings = {
                'headerSpacerHeight': 'current-header',
                'heroPricingSpacerHeight': 'current-hero-pricing',
                'pricingAdvantagesSpacerHeight': 'current-pricing-advantages',
                'advantagesComparisonSpacerHeight': 'current-advantages-comparison',
                'comparisonContactSpacerHeight': 'current-comparison-contact'
            };
            
            const elementId = mappings[spacingName];
            if (elementId) {
                const element = document.getElementById(elementId);
                if (element) {
                    element.textContent = `${value}px`;
                }
            }
        }
        
        function loadSpacingsFromStorage() {
            const styles = JSON.parse(localStorage.getItem('locationVS-live-styles') || '{}');
            
            // Mise √† jour inputs
            document.getElementById('headerSpacing').value = styles.headerSpacerHeight || 80;
            document.getElementById('heroPricingSpacing').value = styles.heroPricingSpacerHeight || 0;
            document.getElementById('pricingAdvantagesSpacing').value = styles.pricingAdvantagesSpacerHeight || 0;
            document.getElementById('advantagesComparisonSpacing').value = styles.advantagesComparisonSpacerHeight || 0;
            document.getElementById('comparisonContactSpacing').value = styles.comparisonContactSpacerHeight || 0;
            
            // Mise √† jour affichage valeurs actuelles
            Object.keys(styles).forEach(key => {
                if (key.includes('SpacerHeight')) {
                    updateCurrentValue(key, styles[key]);
                }
            });
            
            console.log('üì• Espacements charg√©s depuis localStorage:', styles);
        }
        
        function resetAllSpacings() {
            const defaultSpacings = {
                headerSpacerHeight: 80,
                heroPricingSpacerHeight: 0,
                pricingAdvantagesSpacerHeight: 0,
                advantagesComparisonSpacerHeight: 0,
                comparisonContactSpacerHeight: 0
            };
            
            localStorage.setItem('locationVS-live-styles', JSON.stringify(defaultSpacings));
            
            // Mise √† jour interface
            loadSpacingsFromStorage();
            
            console.log('üîÑ Espacements reset aux valeurs par d√©faut');
        }
        
        function showDiagnostic() {
            const output = document.getElementById('diagnostic-output');
            
            // Diagnostic localStorage
            const styles = JSON.parse(localStorage.getItem('locationVS-live-styles') || '{}');
            
            // Diagnostic SpacingManager si disponible
            let spacingManagerInfo = 'SpacingManager non charg√© (normal sur cette page de test)';
            if (typeof window.getSpacingDiagnostic === 'function') {
                spacingManagerInfo = JSON.stringify(window.getSpacingDiagnostic(), null, 2);
            }
            
            // Diagnostic CSS dynamique
            const dynamicStyleElement = document.getElementById('dynamic-spacing-locationVS');
            const hasDynamicCSS = !!dynamicStyleElement;
            
            const diagnostic = {
                'localStorage': styles,
                'SpacingManager': spacingManagerInfo,
                'CSS Dynamique': hasDynamicCSS ? 'Pr√©sent' : 'Absent',
                'Timestamp': new Date().toLocaleString()
            };
            
            output.textContent = JSON.stringify(diagnostic, null, 2);
            
            console.log('üîç Diagnostic espacements:', diagnostic);
        }
        
        function openLocationPage() {
            window.open('location.html', '_blank');
            console.log('üì± location.html ouvert - V√©rifiez que les espacements s\'appliquent');
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            loadSpacingsFromStorage();
            console.log('üß™ Page test espacements charg√©e');
        });
    </script>
</body>
</html>