<!DOCTYPE html>
<html>
<head>
    <title>Validation Rapide - Corrections Apport√©es</title>
    <style>
        body { background: #0F172A; color: #F1F5F9; font-family: monospace; padding: 20px; }
        .success { color: #10B981; }
        .error { color: #EF4444; }
        pre { background: #1E293B; padding: 15px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>üîç Validation Rapide des Corrections</h1>
    <div id="results"></div>

    <script src="src/core/HierarchyManager.js"></script>
    <script src="src/core/PresentationEngine.js"></script>
    <script src="src/core/HistoryManager.js"></script>
    <script src="src/core/SyncManager.js"></script>
    <script src="src/core/WidgetManager.js"></script>
    <script src="src/core/SectionManager.js"></script>
    <script src="src/utils/UIUtils.js"></script>
    
    <script>
        const results = document.getElementById('results');
        const logs = [];
        
        function log(message, isSuccess = true) {
            logs.push(`<div class="${isSuccess ? 'success' : 'error'}">${message}</div>`);
            results.innerHTML = logs.join('\n');
        }

        async function validate() {
            try {
                // Test 1: HierarchyManager a-t-il getTemplates() ?
                const hierarchy = new HierarchyManager();
                if (typeof hierarchy.getTemplates === 'function') {
                    log('‚úÖ HierarchyManager.getTemplates() existe');
                    
                    const templates = hierarchy.getTemplates();
                    log(`‚úÖ getTemplates() retourne: ${Object.keys(templates).length} templates`);
                } else {
                    log('‚ùå HierarchyManager.getTemplates() manque', false);
                }

                // Test 2: HierarchyManager a-t-il init() ?
                if (typeof hierarchy.init === 'function') {
                    log('‚úÖ HierarchyManager.init() existe');
                    
                    await hierarchy.init();
                    log('‚úÖ HierarchyManager.init() s\'ex√©cute sans erreur');
                } else {
                    log('‚ùå HierarchyManager.init() manque', false);
                }

                // Test 3: HierarchyManager a-t-il getHierarchyLevels() ?
                if (typeof hierarchy.getHierarchyLevels === 'function') {
                    log('‚úÖ HierarchyManager.getHierarchyLevels() existe');
                    
                    const levels = hierarchy.getHierarchyLevels();
                    log(`‚úÖ getHierarchyLevels() retourne: ${Object.keys(levels).length} niveaux`);
                } else {
                    log('‚ùå HierarchyManager.getHierarchyLevels() manque', false);
                }

                // Test 4: PresentationEngine peut-il utiliser HierarchyManager ?
                const engine = new PresentationEngine();
                if (engine.hierarchyManager && typeof engine.hierarchyManager.getTemplates === 'function') {
                    log('‚úÖ PresentationEngine.hierarchyManager.getTemplates() accessible');
                    
                    const state = engine.getState();
                    if (state.hierarchyTemplates && state.hierarchyLevels) {
                        log('‚úÖ getState() inclut hierarchyTemplates et hierarchyLevels');
                    } else {
                        log('‚ùå getState() incomplet', false);
                    }
                } else {
                    log('‚ùå PresentationEngine ne peut pas acc√©der √† HierarchyManager', false);
                }

                log('\nüéâ Validation termin√©e ! Toutes les corrections semblent fonctionnelles.');

            } catch (error) {
                log(`‚ùå Erreur lors de la validation: ${error.message}`, false);
            }
        }

        // D√©marrer la validation
        validate();
    </script>
</body>
</html>