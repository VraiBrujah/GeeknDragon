formula_id,formula_expression,variables_used,description_fr,description_en,usage_context
# CALCULS COÛTS PLOMB - Formules réalistes
lead_total_10y_per_cart,"lead_replacement_cost_with_risk_10y + lead_maintenance_total_10y + recycling_disposal_cost + ((revenue_loss_yearly + overconsumption_cost_yearly + insurance_increase_yearly) * 10)","lead_replacement_cost_with_risk_10y,lead_maintenance_total_10y,recycling_disposal_cost,revenue_loss_yearly,overconsumption_cost_yearly,insurance_increase_yearly","Coût total réel d'une voiturette avec batteries plomb sur 10 ans","Real total cost of one cart with lead batteries over 10 years","Calcul principal coût plomb réaliste"
lead_total_fleet_10y,"lead_total_10y_per_cart * current_cart_count","lead_total_10y_per_cart,current_cart_count","Coût total d'une flotte avec batteries plomb sur 10 ans","Total cost of a fleet with lead batteries over 10 years","Comparaison flotte"
lead_replacements_10y,"FLOOR(10 / lead_replacement_cycle_years)","lead_replacement_cycle_years","Nombre de remplacements nécessaires sur 10 ans","Number of replacements needed over 10 years","Affichage comparaison"
lead_replacements_paid_10y,"MAX(0, FLOOR(10 / lead_replacement_cycle_years) - FLOOR(lead_lifespan_max / lead_replacement_cycle_years))","lead_replacement_cycle_years,lead_lifespan_max","Nombre de remplacements payants sur 10 ans (garantie 5 ans)","Number of paid replacements over 10 years (5-year warranty)","Calcul coûts réels"
lead_replacement_cost_with_risk_10y,"lead_cost_replacement_unit * lead_replacements_paid_10y * (1 + premature_failure_percent / 100)","lead_cost_replacement_unit,lead_replacements_paid_10y,premature_failure_percent","Coût total remplacements avec risque 10 ans","Total replacement cost with risk 10 years","Section 4 détails"
lead_replacements_20y,"FLOOR(20 / lead_replacement_cycle_years)","lead_replacement_cycle_years","Nombre de remplacements nécessaires sur 20 ans","Number of replacements needed over 20 years","Affichage comparaison"
lead_replacements_paid_20y,"MAX(0, FLOOR(20 / lead_replacement_cycle_years) - FLOOR(lead_lifespan_max / lead_replacement_cycle_years))","lead_replacement_cycle_years,lead_lifespan_max","Nombre de remplacements payants sur 20 ans (garantie 5 ans)","Number of paid replacements over 20 years (5-year warranty)","Calcul coûts réels"
lead_replacement_cost_with_risk_20y,"lead_cost_replacement_unit * lead_replacements_paid_20y * (1 + premature_failure_percent / 100)","lead_cost_replacement_unit,lead_replacements_paid_20y,premature_failure_percent","Coût total remplacements avec risque 20 ans","Total replacement cost with risk 20 years","Section détails 20 ans"
lead_total_20y_per_cart,"lead_replacement_cost_with_risk_20y + lead_maintenance_total_20y + (recycling_disposal_cost * lead_replacements_20y) + ((revenue_loss_yearly + overconsumption_cost_yearly + insurance_increase_yearly) * 20)","lead_replacement_cost_with_risk_20y,lead_maintenance_total_20y,recycling_disposal_cost,lead_replacements_20y,revenue_loss_yearly,overconsumption_cost_yearly,insurance_increase_yearly","Coût total réel d'une voiturette avec batteries plomb sur 20 ans (garantie 5 ans)","Real total cost of one cart with lead batteries over 20 years (5-year warranty)","Calcul 20 ans plomb"

# CALCULS COÛTS LIFEPO4
lifepo4_total_10y_per_cart,"lifepo4_monthly_10y * 12 * 10","lifepo4_monthly_10y","Coût total d'une voiturette LiFePO4 sur 10 ans (contrat 10 ans)","Total cost of one LiFePO4 cart over 10 years (10-year contract)","Calcul principal LiFePO4"
lifepo4_total_20y_per_cart,"lifepo4_monthly_20y * 12 * 20","lifepo4_monthly_20y","Coût total d'une voiturette LiFePO4 sur 20 ans (contrat 20 ans)","Total cost of one LiFePO4 cart over 20 years (20-year contract)","Calcul 20 ans"
lifepo4_total_fleet_per_cart,"lifepo4_monthly_fleet * 12 * 20","lifepo4_monthly_fleet","Coût total d'une voiturette LiFePO4 sur 20 ans (offre flotte)","Total cost of one LiFePO4 cart over 20 years (fleet offer)","Calcul flotte"
lifepo4_monthly_fleet_total,"lifepo4_monthly_fleet * current_cart_count","lifepo4_monthly_fleet,current_cart_count","Coût mensuel total pour une flotte LiFePO4","Total monthly cost for LiFePO4 fleet","Affichage prix flotte"

# CALCULS ÉCONOMIES - Dynamiques et précis
savings_10y_per_cart,"lead_total_10y_per_cart - lifepo4_total_10y_per_cart","lead_total_10y_per_cart,lifepo4_total_10y_per_cart","Économies par voiturette sur 10 ans","Savings per cart over 10 years","Calcul économies principales"
savings_20y_per_cart,"lead_total_20y_per_cart - lifepo4_total_20y_per_cart","lead_total_20y_per_cart,lifepo4_total_20y_per_cart","Économies par voiturette sur 20 ans","Savings per cart over 20 years","Calcul économies 20 ans"
savings_fleet_per_cart,"lead_total_20y_per_cart - lifepo4_total_fleet_per_cart","lead_total_20y_per_cart,lifepo4_total_fleet_per_cart","Économies par voiturette offre flotte sur 20 ans","Savings per cart fleet offer over 20 years","Calcul économies flotte"
savings_fleet_10y,"savings_10y_per_cart * current_cart_count","savings_10y_per_cart,current_cart_count","Économies totales flotte sur 10 ans","Total fleet savings over 10 years","Affichage économies flotte"
savings_percentage_10y,"(savings_10y_per_cart / lead_total_10y_per_cart) * 100","savings_10y_per_cart,lead_total_10y_per_cart","Pourcentage d'économies sur 10 ans","Percentage of savings over 10 years","Calcul pourcentage"

# CALCULS IMPACT TEMPS DE CHARGE
extra_carts_needed,"ROUND(current_cart_count * fleet_overhead_percent / 100)","current_cart_count,fleet_overhead_percent","Nombre de voiturettes supplémentaires nécessaires","Number of additional carts needed","Impact temps charge"
extra_fleet_total_cost,"extra_carts_needed * extra_fleet_cost_per_cart","extra_carts_needed,extra_fleet_cost_per_cart","Coût total des voiturettes supplémentaires","Total cost of additional carts","Impact financier temps charge"
charging_impact_display,"lead_charging_hours + 'h = +' + extra_carts_needed + ' voiturettes (' + extra_fleet_total_cost + '$)'","lead_charging_hours,extra_carts_needed,extra_fleet_total_cost","Affichage impact temps de charge","Charging time impact display","Interface utilisateur"

# CALCULS MAINTENANCE - Valeurs réalistes
lead_maintenance_total_10y,"lead_maintenance_hours_unit * 10 * lead_technician_hourly_rate","lead_maintenance_hours_unit,lead_technician_hourly_rate","Coût total maintenance plomb sur 10 ans","Total lead maintenance cost over 10 years","Détail maintenance réaliste"
lead_maintenance_fleet_10y,"lead_maintenance_total_10y * current_cart_count","lead_maintenance_total_10y,current_cart_count","Coût maintenance flotte plomb sur 10 ans","Lead fleet maintenance cost over 10 years","Maintenance flotte"
lead_maintenance_total_20y,"lead_maintenance_hours_unit * 20 * lead_technician_hourly_rate","lead_maintenance_hours_unit,lead_technician_hourly_rate","Coût total maintenance plomb sur 20 ans","Total lead maintenance cost over 20 years","Détail maintenance 20 ans"

# CALCULS RISQUES OPÉRATIONNELS - Section 3
operational_risks_calculation_yearly,"revenue_loss_yearly + overconsumption_cost_yearly + insurance_increase_yearly","revenue_loss_yearly,overconsumption_cost_yearly,insurance_increase_yearly","Calcul total risques opérationnels par an","Total operational risks calculation per year","Section 3 calcul risques"
operational_risks_breakdown,"ROUND(revenue_loss_yearly) + '$ + ' + ROUND(overconsumption_cost_yearly) + '$ + ' + ROUND(insurance_increase_yearly) + '$ + ' + ROUND(recycling_disposal_cost) + '$ = ' + ROUND(operational_risks_calculation_yearly + recycling_disposal_cost) + '$ par voiturette par an'","revenue_loss_yearly,overconsumption_cost_yearly,insurance_increase_yearly,recycling_disposal_cost,operational_risks_calculation_yearly","Détail risques opérationnels avec recyclage","Operational risks breakdown with recycling","Section 3 affichage détaillé"

# CALCULS TOTAUX DÉTAILLÉS - Section TOTAL des Coûts Cachés Réels
lead_replacement_cost_with_risk_10y,"lead_cost_replacement_unit * MAX(0, FLOOR(10 / lead_replacement_cycle_years) - 1) * (1 + premature_failure_percent / 100)","lead_cost_replacement_unit,lead_replacement_cycle_years,premature_failure_percent","Coût total remplacements avec risque 10 ans","Total replacement cost with risk 10 years","Section 4 détails"
total_breakdown_calculation_10y,"'Remplacements avec risque: ' + ROUND(lead_replacement_cost_with_risk_10y) + '$ + Maintenance: ' + ROUND(lead_maintenance_total_10y) + '$ + Risques opérationnels: ' + ROUND(operational_risks_calculation_yearly * 10) + '$ + Recyclage: ' + ROUND(recycling_disposal_cost) + '$'","lead_replacement_cost_with_risk_10y,lead_maintenance_total_10y,operational_risks_calculation_yearly,recycling_disposal_cost","Calcul détaillé des coûts cachés","Detailed hidden costs calculation","Section 4 point 2"
total_cost_simplified_10y,"lead_replacement_cost_with_risk_10y + lead_maintenance_total_10y + (operational_risks_calculation_yearly * 10) + recycling_disposal_cost","lead_replacement_cost_with_risk_10y,lead_maintenance_total_10y,operational_risks_calculation_yearly,recycling_disposal_cost","Coût total simplifié 10 ans","Simplified total cost 10 years","Section 4 point 3"
total_cost_final_calculation_10y,"'TOTAL RÉEL avec risque de bris prématuré : ' + ROUND(total_cost_simplified_10y) + '$ par voiturette sur 10 ans'","total_cost_simplified_10y","Calcul final avec formulation complète","Final calculation with complete wording","Section 4 calculation"

# CALCULS 20 ANS - Détails pour section comparaison avancée
lead_replacement_cost_with_risk_20y,"lead_cost_replacement_unit * MAX(0, FLOOR(20 / lead_replacement_cycle_years) - 1) * (1 + premature_failure_percent / 100)","lead_cost_replacement_unit,lead_replacement_cycle_years,premature_failure_percent","Coût total remplacements avec risque 20 ans","Total replacement cost with risk 20 years","Calculs 20 ans"
lead_total_costs_20y_breakdown,"ROUND(lead_replacement_cost_with_risk_20y) + '$ (batteries) + ' + ROUND(lead_maintenance_total_20y) + '$ (maintenance) + ' + ROUND((operational_risks_calculation_yearly + recycling_disposal_cost) * 20) + '$ (coûts cachés) par voiturette'","lead_replacement_cost_with_risk_20y,lead_maintenance_total_20y,operational_risks_calculation_yearly,recycling_disposal_cost","Détail coûts plomb 20 ans","Lead costs breakdown 20 years","Section détails 20 ans"
lead_maintenance_fleet_20y_display,"ROUND(lead_maintenance_total_20y * current_cart_count) + '$ (' + lead_maintenance_hours_unit + 'h/an × ' + lead_technician_hourly_rate + '$/h × ' + current_cart_count + ' voiturettes × 20 ans)'","lead_maintenance_total_20y,current_cart_count,lead_maintenance_hours_unit,lead_technician_hourly_rate","Affichage maintenance flotte 20 ans avec détail","Fleet maintenance display 20 years with details","Section calculs détaillés"

# VALIDATIONS ET CONTRÔLES
fleet_offer_active,"current_cart_count >= fleet_minimum_carts","current_cart_count,fleet_minimum_carts","Vérification si offre flotte est active","Check if fleet offer is active","Logique interface"
lead_total_cost_validation,"(lead_cost_replacement_unit * (10 / lead_replacement_cycle_years)) + lead_maintenance_10y_unit","lead_cost_replacement_unit,lead_replacement_cycle_years,lead_maintenance_10y_unit","Validation coût de base plomb 10 ans","Lead basic cost validation 10 years","Contrôle qualité calculs"

# COMPARAISONS POUR TABLEAU
comparison_lead_10y_total,"lead_total_10y_per_cart * current_cart_count","lead_total_10y_per_cart,current_cart_count","Coût total flotte plomb 10 ans pour comparaison","Total lead fleet cost 10 years for comparison","Tableau comparaison"
comparison_lifepo4_10y_total,"lifepo4_total_10y_per_cart * current_cart_count","lifepo4_total_10y_per_cart,current_cart_count","Coût total flotte LiFePO4 10 ans pour comparaison","Total LiFePO4 fleet cost 10 years for comparison","Tableau comparaison"
comparison_maintenance_hours_total,"lead_maintenance_hours_unit * current_cart_count","lead_maintenance_hours_unit,current_cart_count","Total heures maintenance flotte par an","Total fleet maintenance hours per year","Tableau comparaison"
comparison_maintenance_cost_total,"lead_maintenance_cost_unit * current_cart_count","lead_maintenance_cost_unit,current_cart_count","Coût total maintenance flotte par an","Total fleet maintenance cost per year","Tableau comparaison coûts"