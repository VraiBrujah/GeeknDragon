(()=>{const e={threshold:[.1,.25,.5,.75],rootMargin:"0px 0px -50px 0px"},t={card:100,feature:150,stagger:50};class n{constructor(){this.observer=null,this.animatedElements=new Set,this.init()}init(){this.setupIntersectionObserver(),this.observeElements(),this.setupParallaxEffects()}setupIntersectionObserver(){this.observer=new IntersectionObserver(this.handleIntersection.bind(this),e)}handleIntersection(e){e.forEach(e=>{e.isIntersecting&&!this.animatedElements.has(e.target)&&(this.animateElement(e.target),this.animatedElements.add(e.target))})}animateElement(e){const t=e.dataset.animation||"fadeInUp",n=parseInt(e.dataset.delay||"0",10);setTimeout(()=>{e.classList.add(`animate-${t}`),e.style.opacity="1",e.style.transform="translateY(0)"},n),e.classList.contains("card")&&this.addSparkleEffect(e)}addSparkleEffect(e){const t=document.createElement("div");t.className="sparkle-container",t.innerHTML='\n        <div class="sparkle" style="--delay: 0s; --duration: 2s;"></div>\n        <div class="sparkle" style="--delay: 0.5s; --duration: 2.5s;"></div>\n        <div class="sparkle" style="--delay: 1s; --duration: 2s;"></div>\n      ',e.style.position="relative",e.appendChild(t),setTimeout(()=>t.remove(),3e3)}observeElements(){document.querySelectorAll(".card").forEach((e,n)=>{e.dataset.animation="fadeInUp",e.dataset.delay=(n*t.stagger).toString(),e.style.opacity="0",e.style.transform="translateY(30px)",this.observer.observe(e)}),document.querySelectorAll("h2, h3").forEach(e=>{(e.closest(".shop-section")||e.closest("section"))&&(e.dataset.animation="slideInFromLeft",e.style.opacity="0",e.style.transform="translateX(-50px)",this.observer.observe(e))})}setupParallaxEffects(){window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0})}handleScroll(){}}class s{constructor(){this.init()}init(){this.enhanceButtons(),this.addHoverEffects(),this.setupCurrencyConverter()}enhanceButtons(){document.addEventListener("click",e=>{const t=e.target.closest(".btn, .snipcart-add-item");if(!t)return;const n=document.createElement("div");n.className="ripple-effect";const s=t.getBoundingClientRect(),a=Math.max(s.width,s.height),r=e.clientX-s.left-a/2,o=e.clientY-s.top-a/2;n.style.cssText=`\n          position: absolute;\n          width: ${a}px;\n          height: ${a}px;\n          left: ${r}px;\n          top: ${o}px;\n          background: rgba(255, 255, 255, 0.3);\n          border-radius: 50%;\n          transform: scale(0);\n          animation: ripple 0.6s ease-out;\n          pointer-events: none;\n        `,t.style.position="relative",t.style.overflow="hidden",t.appendChild(n),setTimeout(()=>n.remove(),600)}),this.addRippleStyles()}addRippleStyles(){if(document.getElementById("ripple-styles"))return;const e=document.createElement("style");e.id="ripple-styles",e.textContent="\n        @keyframes ripple {\n          to {\n            transform: scale(2);\n            opacity: 0;\n          }\n        }\n        \n        @keyframes sparkle {\n          0%, 100% {\n            opacity: 0;\n            transform: scale(0) rotate(0deg);\n          }\n          50% {\n            opacity: 1;\n            transform: scale(1) rotate(180deg);\n          }\n        }\n        \n        .sparkle-container {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n          width: 20px;\n          height: 20px;\n          pointer-events: none;\n        }\n        \n        .sparkle {\n          position: absolute;\n          width: 4px;\n          height: 4px;\n          background: #8b5cf6;\n          border-radius: 50%;\n          animation: sparkle var(--duration, 2s) ease-in-out infinite;\n          animation-delay: var(--delay, 0s);\n        }\n        \n        @keyframes fadeInUp {\n          from {\n            opacity: 0;\n            transform: translateY(30px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes slideInFromLeft {\n          from {\n            opacity: 0;\n            transform: translateX(-50px);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(0);\n          }\n        }\n      ",document.head.appendChild(e)}addHoverEffects(){document.querySelectorAll(".card").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.filter="drop-shadow(0 0 20px rgba(139, 92, 246, 0.4))"}),e.addEventListener("mouseleave",()=>{e.style.filter=""})}),document.querySelectorAll(".card img").forEach(e=>{e.addEventListener("mousemove",t=>{const n=e.getBoundingClientRect(),s=(t.clientX-n.left)/n.width,a=10*((t.clientY-n.top)/n.height-.5),r=10*(.5-s);e.style.transform=`perspective(1000px) rotateX(${a}deg) rotateY(${r}deg) scale(1.05)`}),e.addEventListener("mouseleave",()=>{e.style.transform=""})})}setupCurrencyConverter(){document.querySelectorAll("#currency-sources input").forEach(e=>{e.addEventListener("input",e=>{document.querySelectorAll("#currency-results td").forEach(e=>{e.classList.add("value-changed"),setTimeout(()=>e.classList.remove("value-changed"),300)})}),e.addEventListener("focus",e=>{e.target.parentElement.style.boxShadow="0 0 0 2px rgba(139, 92, 246, 0.3)"}),e.addEventListener("blur",e=>{e.target.parentElement.style.boxShadow=""})})}}class a{constructor(){this.init()}init(){this.lazyLoadImages(),this.optimizeAnimations()}lazyLoadImages(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"),e.unobserve(n))}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}optimizeAnimations(){window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(document.documentElement.style.setProperty("--boutique-transition","none"),document.documentElement.style.setProperty("--boutique-transition-fast","none"))}}function r(){document.querySelector("#main")&&window.location.pathname.includes("boutique")&&(new n,new s,new a)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r(),window.BoutiquePremium={ScrollAnimations:n,InteractiveEnhancements:s,PerformanceOptimizer:a}})();